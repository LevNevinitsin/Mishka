{"version":3,"sources":["contacts.js","main-navigation.js","modal-trigger.js","slider.js"],"names":["contacts","document","querySelector","map","contactsMapContainer","remove","contactsList","mapHeading","createElement","classList","add","textContent","after","script","src","defer","head","appendChild","window","initMap","google","maps","Map","center","lat","lng","zoom","Marker","position","icon","mainNavigationBasic","mainNavigationSearch","menuToggleButton","transitionTime","transitionSwitch","menu","toggle","openMenu","actualHeight","scrollHeight","requestAnimationFrame","style","height","addEventListener","removeAttribute","once","closeMenu","antiSpam","removeEventListener","menuToggle","setTimeout","contains","modal","applyModal","modalTriggers","querySelectorAll","modalRadios","modalRadiosArray","modalAdd","triggeredElement","i","length","modalTrigger","e","target","closest","preventDefault","focus","closeModal","key","includes","activeElement","slider","applySlider","sliderList","sliderItems","sliderArray","togglePrev","toggleNext","innerHTML","step","draw","slideNumber","item","redraw","transition","left","showPrev","showNext"],"mappings":"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","file":"script.min.js","sourcesContent":["const contacts = document.querySelector(\".contacts\");\n\nif (contacts) {\n  map();\n}\n\nfunction map() {\n  // Remove map picture\n  const contactsMapContainer = document.querySelector(\".contacts__map\");\n  const contactsMapPicture = contactsMapContainer.querySelector(\"picture\");\n\n  contactsMapPicture.remove();\n\n  // Add heading for accessibility\n  const contactsList = document.querySelector(\".contacts__list\");\n  const mapHeading = document.createElement(\"h3\");\n  mapHeading.classList.add(\"visually-hidden\");\n  mapHeading.textContent = \"Карта с местоположением магазина на карте по адресу: Санкт-Петербург, ул. Большая Конюшенная 19/8, офис 101.\"\n\n  contactsList.after(mapHeading);\n\n  // Set size for map container\n  contactsMapContainer.classList.add(\"contacts__map--api\");\n\n  // Map script\n  const script = document.createElement('script');\n  script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyB0a5vYLNnFwIjYWbqVfy3JaaApqK55qrM&callback=initMap';\n  script.defer = true;\n\n  document.head.appendChild(script);\n\n  window.initMap = function() {\n    const mishkaShop = {lat: 59.93879978424407, lng: 30.3228420342727};\n    const mishkaMarker = {lat: 59.93867978424407, lng: 30.3229920342727};\n    const map = new google.maps.Map(\n      document.querySelector(\".contacts__map\"), {\n        center: mishkaShop,\n        zoom: 16.65,\n      });\n    const image = \"img/icon_map_marker.svg\"\n    const marker = new google.maps.Marker({\n      position: mishkaMarker,\n      map: map,\n      icon: image\n    });\n  };\n}\n","const mainNavigationBasic = document.querySelector(\".main-navigation--basic\");\nconst mainNavigationSearch = document.querySelector(\".main-navigation--search\");\nconst menuToggleButton = document.querySelector(\".page-header__toggle\");\nconst transitionTime = 200;\n\n// Initialization\n\nmainNavigationBasic.classList.remove(\"main-navigation--nojs\");\nmainNavigationSearch.classList.remove(\"main-navigation--nojs\");\nmenuToggleButton.classList.remove(\"page-header__toggle--nojs\");\n\nmainNavigationBasic.classList.add(\"main-navigation--closed\");\nmainNavigationSearch.classList.add(\"main-navigation--closed\");\nmenuToggleButton.classList.add(\"page-header__toggle--closed\");\n\nmainNavigationBasic.classList.add(\"main-navigation--ease-in\");\nmainNavigationSearch.classList.add(\"main-navigation--ease-out\");\n\n// Transition switch function\n\nfunction transitionSwitch(menu) {\n  menu.classList.toggle(\"main-navigation--ease-in\");\n  menu.classList.toggle(\"main-navigation--ease-out\");\n}\n\n// Menu opening function\n\nfunction openMenu(menu) {\n  menu.classList.remove(\"main-navigation--closed\");\n  const actualHeight = menu.scrollHeight;\n\n  requestAnimationFrame(function() {\n    menu.style.height = 0;\n    requestAnimationFrame(function() {\n      menu.style.height = actualHeight + \"px\";\n    })\n  })\n\n  function cleanAndPrepare() {\n    menu.removeAttribute(\"style\");\n    transitionSwitch(menu);\n  }\n  menu.addEventListener(\"transitionend\", cleanAndPrepare, {once: true});\n}\n\n// Menu closing function\n\nfunction closeMenu(menu) {\n  const actualHeight = menu.scrollHeight;\n\n  requestAnimationFrame(function() {\n    menu.style.height = actualHeight + \"px\";\n    requestAnimationFrame(function() {\n      menu.style.height = 0;\n    })\n  })\n\n  function cleanAndPrepare() {\n    menu.removeAttribute(\"style\");\n    menu.classList.add(\"main-navigation--closed\");\n    transitionSwitch(menu);\n  }\n  menu.addEventListener(\"transitionend\", cleanAndPrepare, {once: true});\n}\n\n// Anti-spam function\n\nfunction antiSpam() {\n  menuToggleButton.removeEventListener(\"click\", menuToggle);\n  setTimeout(function() { menuToggleButton.addEventListener(\"click\", menuToggle) }, (transitionTime * 2 + 100))\n}\n\n// Menu toggling function\n\nfunction menuToggle() {\n  antiSpam();\n  if (mainNavigationBasic.classList.contains(\"main-navigation--closed\")) {\n    openMenu(mainNavigationBasic);\n    setTimeout(openMenu, transitionTime, mainNavigationSearch);\n    menuToggleButton.classList.remove(\"page-header__toggle--closed\");\n  } else {\n    closeMenu(mainNavigationSearch);\n    setTimeout(closeMenu, transitionTime, mainNavigationBasic);\n    menuToggleButton.classList.add(\"page-header__toggle--closed\");\n  }\n}\n\nmenuToggleButton.addEventListener(\"click\", menuToggle);\n","const modal = document.querySelector(\".modal\");\n\nif (modal) {\n  applyModal();\n}\n\nfunction applyModal() {\n  const modalTriggers = document.querySelectorAll(\".modal-trigger\");\n  const modalWrapper = document.querySelector(\".modal__wrapper\");\n  const modalRadios = document.querySelectorAll(\".modal__radio\");\n  const modalRadiosArray = [];\n  const modalAdd = document.querySelector(\".modal__add\");\n  let triggeredElement;\n\n  for (let i = 0; i < modalRadios.length; i++) {\n    modalRadiosArray[i] = modalRadios[i];\n  }\n\n  for (modalTrigger of modalTriggers) {\n    modalTrigger.addEventListener(\"click\", function(e) {\n      triggeredElement = (e.target.closest(\"a\"));\n      e.preventDefault();\n      modal.classList.add(\"modal--show\");\n      requestAnimationFrame(function() {\n        modal.classList.add(\"modal--appear\");\n      })\n      modal.querySelector(\"input:checked\").focus();\n    })\n  }\n\n  // Closing function\n\n  function closeModal() {\n    modal.classList.remove(\"modal--appear\");\n    modal.addEventListener(\"transitionend\", function() {modal.classList.remove(\"modal--show\")}, {once: true});\n    triggeredElement.focus();\n  }\n\n  // Closing on escape and tab cycle within the modal window\n\n  window.addEventListener(\"keydown\", function(e) {\n    if (modal.classList.contains(\"modal--show\")) {\n      let tabIsPressed = (e.key === \"Tab\");\n      if (!tabIsPressed) {\n        if (e.key === \"Escape\") {\n          e.preventDefault();\n          closeModal();\n        } else {\n          return;\n        }\n      } else {\n        if (modalRadiosArray.includes(document.activeElement)) {\n          e.preventDefault();\n          modalAdd.focus();\n        } else {\n          e.preventDefault();\n          modal.querySelector(\"input:checked\").focus();\n        }\n      }\n    }\n  })\n\n  // Closing on clicking on the outside of the modal window\n\n  modal.addEventListener(\"click\", function(e) {\n    if (e.target.closest(\".modal__wrapper\") === null) {\n      closeModal()\n    }\n  });\n}\n","const slider = document.querySelector(\".slider\")\n\nif (slider) {\n  applySlider()\n}\n\nfunction applySlider() {\n  const sliderList = document.querySelector(\".slider__list\");\n  const sliderItems = document.querySelectorAll(\".slider__item\");\n  const sliderArray = [];\n  const togglePrev = document.querySelector(\".slider__toggle--prev\");\n  const toggleNext = document.querySelector(\".slider__toggle--next\");\n\n  for (let i = 0; i < sliderItems.length; i++) {\n    sliderArray[i] = sliderItems[i].innerHTML;\n    sliderItems[i].remove();\n  }\n\n  let step = 0;\n\n  function draw() {\n    for (let i = 0; i <= 2; i++) {\n      let slideNumber = step + i;\n      if (slideNumber === 0) {\n        slideNumber = sliderArray.length - 1;\n      } else if (slideNumber === sliderArray.length + 1) {\n        slideNumber = 0\n      } else {\n        slideNumber--;\n      }\n      let item = document.createElement(\"li\");\n      item.innerHTML = sliderArray[slideNumber];\n      item.classList.add(\"slider__item\");\n      item.classList.add(\"slider__item--active\");\n      item.classList.add(\"reviews__item\");\n      sliderList.appendChild(item);\n    }\n  }\n\n  draw();\n\n  function redraw() {\n    sliderList.innerHTML = \"\";\n    sliderList.style.transition = \"none\";\n    requestAnimationFrame(function() {\n      sliderList.style.left = \"0\";\n      draw();\n      requestAnimationFrame(function() {\n        sliderList.removeAttribute(\"style\");\n        togglePrev.addEventListener(\"click\", showPrev);\n        toggleNext.addEventListener(\"click\", showNext);\n      })\n    })\n  }\n\n  function showPrev() {\n    if (step === 0) {\n      step = sliderArray.length - 1;\n    } else {\n      step--;\n    }\n    sliderList.addEventListener(\"transitionend\", redraw, {once: true})\n    sliderList.style.left = \"120%\";\n    togglePrev.removeEventListener(\"click\", showPrev);\n    toggleNext.removeEventListener(\"click\", showNext);\n  }\n\n  togglePrev.addEventListener(\"click\", showPrev)\n\n  function showNext() {\n    if (step === sliderArray.length - 1) {\n      step = 0;\n    } else {\n      step++;\n    }\n    sliderList.addEventListener(\"transitionend\", redraw, {once: true})\n    sliderList.style.left = \"-120%\";\n    togglePrev.removeEventListener(\"click\", showPrev);\n    toggleNext.removeEventListener(\"click\", showNext);\n  }\n\n  toggleNext.addEventListener(\"click\", showNext)\n}\n"]}