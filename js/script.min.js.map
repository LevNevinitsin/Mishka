{"version":3,"sources":["contacts.js","main-navigation.js","modal-trigger.js","slider.js"],"names":["contacts","document","querySelector","FAKE_MAP_SELECTOR","MAP_CONTAINER_ID","CENTER_LAT","CENTER_LNG","MARKER_LAT","MARKER_LNG","ZOOM","MARKER_ICON_PATH","map","fakeMapElement","ymaps","ready","remove","myMap","Map","center","zoom","marker","Placemark","hintContent","balloonContent","iconLayout","iconImageHref","iconImageSize","iconImageOffset","geoObjects","add","mainNavigationBasic","mainNavigationSearch","menuToggleButton","transitionTime","transitionSwitch","menu","classList","toggle","openMenu","actualHeight","scrollHeight","requestAnimationFrame","style","height","addEventListener","removeAttribute","once","closeMenu","antiSpam","removeEventListener","menuToggle","setTimeout","contains","modal","applyModal","modalTriggers","querySelectorAll","modalRadios","modalRadiosArray","modalAdd","triggeredElement","i","length","modalTrigger","e","target","closest","preventDefault","focus","closeModal","window","key","includes","activeElement","slider","applySlider","sliderList","sliderItems","sliderArray","togglePrev","toggleNext","innerHTML","step","draw","slideNumber","item","createElement","appendChild","redraw","transition","left","showPrev","showNext"],"mappings":"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","file":"script.min.js","sourcesContent":["const contacts = document.querySelector('.contacts');\n\nconst FAKE_MAP_SELECTOR = '.contacts__fake-map';\n\nconst MAP_CONTAINER_ID = 'map';\nconst CENTER_LAT = 59.93879978424407;\nconst CENTER_LNG = 30.3228420342727;\nconst MARKER_LAT = 59.93867978424407;\nconst MARKER_LNG = 30.3229920342727;\nconst ZOOM = 16;\nconst MARKER_ICON_PATH = 'img/icon_map_marker.svg';\n\nif (contacts) {\n  map();\n}\n\nfunction map () {\n  const fakeMapElement = document.querySelector(FAKE_MAP_SELECTOR);\n\n  ymaps.ready(init);\n\n  function init() {\n    fakeMapElement.remove();\n\n    const myMap = new ymaps.Map(MAP_CONTAINER_ID, {\n      center: [CENTER_LAT, CENTER_LNG],\n      zoom: ZOOM,\n    });\n\n    const marker = new ymaps.Placemark([MARKER_LAT, MARKER_LNG], {\n      hintContent: 'qqq',\n      balloonContent: 'www'\n    }, {\n        iconLayout: 'default#image',\n        iconImageHref: MARKER_ICON_PATH,\n        iconImageSize: [67, 101],\n        iconImageOffset: [-23, -101]\n    });\n\n    myMap.geoObjects.add(marker);\n  }\n}\n","const mainNavigationBasic = document.querySelector(\".main-navigation--basic\");\nconst mainNavigationSearch = document.querySelector(\".main-navigation--search\");\nconst menuToggleButton = document.querySelector(\".page-header__toggle\");\nconst transitionTime = 200;\n\n// Initialization\n\nmainNavigationBasic.classList.remove(\"main-navigation--nojs\");\nmainNavigationSearch.classList.remove(\"main-navigation--nojs\");\nmenuToggleButton.classList.remove(\"page-header__toggle--nojs\");\n\nmainNavigationBasic.classList.add(\"main-navigation--closed\");\nmainNavigationSearch.classList.add(\"main-navigation--closed\");\nmenuToggleButton.classList.add(\"page-header__toggle--closed\");\n\nmainNavigationBasic.classList.add(\"main-navigation--ease-in\");\nmainNavigationSearch.classList.add(\"main-navigation--ease-out\");\n\n// Transition switch function\n\nfunction transitionSwitch(menu) {\n  menu.classList.toggle(\"main-navigation--ease-in\");\n  menu.classList.toggle(\"main-navigation--ease-out\");\n}\n\n// Menu opening function\n\nfunction openMenu(menu) {\n  menu.classList.remove(\"main-navigation--closed\");\n  const actualHeight = menu.scrollHeight;\n\n  requestAnimationFrame(function() {\n    menu.style.height = 0;\n    requestAnimationFrame(function() {\n      menu.style.height = actualHeight + \"px\";\n    })\n  })\n\n  function cleanAndPrepare() {\n    menu.removeAttribute(\"style\");\n    transitionSwitch(menu);\n  }\n  menu.addEventListener(\"transitionend\", cleanAndPrepare, {once: true});\n}\n\n// Menu closing function\n\nfunction closeMenu(menu) {\n  const actualHeight = menu.scrollHeight;\n\n  requestAnimationFrame(function() {\n    menu.style.height = actualHeight + \"px\";\n    requestAnimationFrame(function() {\n      menu.style.height = 0;\n    })\n  })\n\n  function cleanAndPrepare() {\n    menu.removeAttribute(\"style\");\n    menu.classList.add(\"main-navigation--closed\");\n    transitionSwitch(menu);\n  }\n  menu.addEventListener(\"transitionend\", cleanAndPrepare, {once: true});\n}\n\n// Anti-spam function\n\nfunction antiSpam() {\n  menuToggleButton.removeEventListener(\"click\", menuToggle);\n  setTimeout(function() { menuToggleButton.addEventListener(\"click\", menuToggle) }, (transitionTime * 2 + 100))\n}\n\n// Menu toggling function\n\nfunction menuToggle() {\n  antiSpam();\n  if (mainNavigationBasic.classList.contains(\"main-navigation--closed\")) {\n    openMenu(mainNavigationBasic);\n    setTimeout(openMenu, transitionTime, mainNavigationSearch);\n    menuToggleButton.classList.remove(\"page-header__toggle--closed\");\n  } else {\n    closeMenu(mainNavigationSearch);\n    setTimeout(closeMenu, transitionTime, mainNavigationBasic);\n    menuToggleButton.classList.add(\"page-header__toggle--closed\");\n  }\n}\n\nmenuToggleButton.addEventListener(\"click\", menuToggle);\n","const modal = document.querySelector(\".modal\");\n\nif (modal) {\n  applyModal();\n}\n\nfunction applyModal() {\n  const modalTriggers = document.querySelectorAll(\".modal-trigger\");\n  const modalWrapper = document.querySelector(\".modal__wrapper\");\n  const modalRadios = document.querySelectorAll(\".modal__radio\");\n  const modalRadiosArray = [];\n  const modalAdd = document.querySelector(\".modal__add\");\n  let triggeredElement;\n\n  for (let i = 0; i < modalRadios.length; i++) {\n    modalRadiosArray[i] = modalRadios[i];\n  }\n\n  for (modalTrigger of modalTriggers) {\n    modalTrigger.addEventListener(\"click\", function(e) {\n      triggeredElement = (e.target.closest(\"a\"));\n      e.preventDefault();\n      modal.classList.add(\"modal--show\");\n      requestAnimationFrame(function() {\n        modal.classList.add(\"modal--appear\");\n      })\n      modal.querySelector(\"input:checked\").focus();\n    })\n  }\n\n  // Closing function\n\n  function closeModal() {\n    modal.classList.remove(\"modal--appear\");\n    modal.addEventListener(\"transitionend\", function() {modal.classList.remove(\"modal--show\")}, {once: true});\n    triggeredElement.focus();\n  }\n\n  // Closing on escape and tab cycle within the modal window\n\n  window.addEventListener(\"keydown\", function(e) {\n    if (modal.classList.contains(\"modal--show\")) {\n      let tabIsPressed = (e.key === \"Tab\");\n      if (!tabIsPressed) {\n        if (e.key === \"Escape\") {\n          e.preventDefault();\n          closeModal();\n        } else {\n          return;\n        }\n      } else {\n        if (modalRadiosArray.includes(document.activeElement)) {\n          e.preventDefault();\n          modalAdd.focus();\n        } else {\n          e.preventDefault();\n          modal.querySelector(\"input:checked\").focus();\n        }\n      }\n    }\n  })\n\n  // Closing on clicking on the outside of the modal window\n\n  modal.addEventListener(\"click\", function(e) {\n    if (e.target.closest(\".modal__wrapper\") === null) {\n      closeModal()\n    }\n  });\n}\n","const slider = document.querySelector(\".slider\")\n\nif (slider) {\n  applySlider()\n}\n\nfunction applySlider() {\n  const sliderList = document.querySelector(\".slider__list\");\n  const sliderItems = document.querySelectorAll(\".slider__item\");\n  const sliderArray = [];\n  const togglePrev = document.querySelector(\".slider__toggle--prev\");\n  const toggleNext = document.querySelector(\".slider__toggle--next\");\n\n  for (let i = 0; i < sliderItems.length; i++) {\n    sliderArray[i] = sliderItems[i].innerHTML;\n    sliderItems[i].remove();\n  }\n\n  let step = 0;\n\n  function draw() {\n    for (let i = 0; i <= 2; i++) {\n      let slideNumber = step + i;\n      if (slideNumber === 0) {\n        slideNumber = sliderArray.length - 1;\n      } else if (slideNumber === sliderArray.length + 1) {\n        slideNumber = 0\n      } else {\n        slideNumber--;\n      }\n      let item = document.createElement(\"li\");\n      item.innerHTML = sliderArray[slideNumber];\n      item.classList.add(\"slider__item\");\n      item.classList.add(\"slider__item--active\");\n      item.classList.add(\"reviews__item\");\n      sliderList.appendChild(item);\n    }\n  }\n\n  draw();\n\n  function redraw() {\n    sliderList.innerHTML = \"\";\n    sliderList.style.transition = \"none\";\n    requestAnimationFrame(function() {\n      sliderList.style.left = \"0\";\n      draw();\n      requestAnimationFrame(function() {\n        sliderList.removeAttribute(\"style\");\n        togglePrev.addEventListener(\"click\", showPrev);\n        toggleNext.addEventListener(\"click\", showNext);\n      })\n    })\n  }\n\n  function showPrev() {\n    if (step === 0) {\n      step = sliderArray.length - 1;\n    } else {\n      step--;\n    }\n    sliderList.addEventListener(\"transitionend\", redraw, {once: true})\n    sliderList.style.left = \"120%\";\n    togglePrev.removeEventListener(\"click\", showPrev);\n    toggleNext.removeEventListener(\"click\", showNext);\n  }\n\n  togglePrev.addEventListener(\"click\", showPrev)\n\n  function showNext() {\n    if (step === sliderArray.length - 1) {\n      step = 0;\n    } else {\n      step++;\n    }\n    sliderList.addEventListener(\"transitionend\", redraw, {once: true})\n    sliderList.style.left = \"-120%\";\n    togglePrev.removeEventListener(\"click\", showPrev);\n    toggleNext.removeEventListener(\"click\", showNext);\n  }\n\n  toggleNext.addEventListener(\"click\", showNext)\n}\n"]}